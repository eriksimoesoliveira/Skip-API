CREATE TABLE COUSINE (
	ID 	INT NOT NULL AUTO_INCREMENT,
	NAME    VARCHAR(50),
	PRIMARY KEY(ID)
);

INSERT INTO COUSINE (NAME) VALUES ('Pizza');
INSERT INTO COUSINE (NAME) VALUES ('Chinese');
INSERT INTO COUSINE (NAME) VALUES ('Italian');
INSERT INTO COUSINE (NAME) VALUES ('Brazilian');

CREATE TABLE CUSTOMER (
	ID 	INT NOT NULL AUTO_INCREMENT,
	NAME   VARCHAR(50) NOT NULL,
	EMAIL   VARCHAR(50) NOT NULL,
	PASSWORD	 VARCHAR(50) NOT NULL,
	PRIMARY KEY(ID)
);

INSERT INTO CUSTOMER (NAME, email, PASSWORD) VALUES ('Erik', 'erik@erik.com', 'erik');

CREATE TABLE TOKENS (
	ID		 INT NOT NULL AUTO_INCREMENT,
	ID_CUSTOMER  INT NOT NULL,
	TOKEN	 VARCHAR(50) NOT NULL,
	ISSUE_TIME	    TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
	LAST_USE_TIME	 TIMESTAMP,
	EXPIRE_TIME	     TIMESTAMP,
	PRIMARY KEY(ID),
	CONSTRAINT  CUSTOMER_FK  FOREIGN KEY  (ID_CUSTOMER)  REFERENCES  CUSTOMER(ID)
);

CREATE TABLE STORES(
	ID		 INT NOT NULL AUTO_INCREMENT,
	NAME	 VARCHAR(50) NOT NULL,
	ADDRESS VARCHAR(200),
	ID_COUSINE INT NOT NULL,
	PRIMARY KEY(ID),
	CONSTRAINT  COUSINE_FK  FOREIGN KEY  (ID_COUSINE)  REFERENCES  COUSINE(ID)
);

insert into stores (name, address, id_cousine) values ('Hai Shang', '2991 Pembina Hwy, Winnipeg, Manitoba R3T 2H5, Canada', 1);
insert into stores (name, address, id_cousine) values ('Ye s', '616 St James St, Winnipeg, Manitoba R3G 3J5, Canada', 1);

CREATE TABLE ORDERS(
	ID INT NOT NULL AUTO_INCREMENT,
	ORDER_DATE  	TIMESTAMP  NOT NULL,
	CUSTOMER_ID INT  NOT NULL,
	DELIVERY_ADDRESS VARCHAR(200)  NOT NULL,
	CONTACT VARCHAR(200)  NOT NULL,
	STORE_ID INT  NOT NULL,
	TOTAL  DOUBLE   NOT NULL,
	STATUS varchar(10)  NOT NULL,
	LAST_UPDATE TIMESTAMP  NOT NULL,
	PRIMARY KEY(ID),
	CONSTRAINT  CUSTOMER_FK1  FOREIGN KEY  (CUSTOMER_ID)  REFERENCES  CUSTOMER(ID),
	CONSTRAINT  STORE_FK1  FOREIGN KEY  (STORE_ID)  REFERENCES  STORES(ID)
);

insert into ORDERS (ORDER_DATE, CUSTOMER_ID, DELIVERY_ADDRESS, CONTACT, STORE_ID, TOTAL, STATUS, LAST_UPDATE) 
values (STR_TO_DATE('03-17-2018 00:00:00','%m-%d-%Y %H:%i:%s'), 1, 'ADDRESS', 'CONTACT', 1, 100, 'WAITING', STR_TO_DATE('03-17-2018 00:00:00','%m-%d-%Y %H:%i:%s'));



